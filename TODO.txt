- syncDir option
- drop groupEvents and only do it that way


Issues here.
- max file size to sync
- "implies filter.type=object" -> put that in mwatchdir docs and README
- how to compare after a restart... i.e. do we gen state from local dir?
- if the latter, that means we could delete a lot of files locally by
  accident! state file locally or no, then?  Or state file in
  appCacheDir + slug?
- TODO: when there is a messy situation: local dir has unrelated files,
  there is a state file in cache dir, ... then 'info' level logs should
  clarify what is going on.
- clarify sync: it is one way, local changes are NOT propagated to Manta.
  We should have a local cache dir.


- cacheDir should NOT be the default. Else it is surprising if happen to
  hit an old forgotten cache. Caching should be *app*-specific anyway: i.e.
  cacheDir passed in.

Then for sync, if the cacheDir is not default, a restart will not notice
changes made while down.

If want local dir to really be a sync, then either that "cacheDir" isn't a
cache -- it is a necessary piece -- or we do (perhaps non-default) a
hard sync compare to local on startup. Perhaps a separate 'allowDelete' to
make this dangerous case clear. That is still slightly an overloaded term:

1. allowDelete to allow deleting when noticing a 'delete' file event
2. deleting a bunch of unrelated files on first poll when the wrong syncDir
   is accidentally given.

TODO: ensure that if there is a filter.name, that it applies for local
    file deletion: will only delete files matching that pattern.

Perhaps require a separate 'force' for #2 and call #1 "syncAllowDelete".

Dirname:

    mwatchdir -s /tmp ~~/stor/pics    # syncs to /tmp/*.jpg
    mwatchdir -s /tmp/ ~~/stor/pics    # syncs to /tmp/*.jpg

----

Take 2.

    # -d, --sync-allow-delete; -D, --sync-allow-init-delete (or something)

    $ mwatchdir -D -s /data/imgapi/keys -n "*.keys" /trent.mick/stor/imagesjo/keys
    mwatchdir: error: must use '-d' when specifying '-D'

TODO: will want a '--dry-run' here for '-dD' usage.

    $ mwatchdir -dD -s /data/imgapi/keys -n "*.keys" /trent.mick/stor/imagesjo/keys

On start:
- If mpath 404, then ... delete all local matching "*.keys". (requires -d, -D
  if in first poll).
-

----

XXX START HERE: implement this

Take 3.

*Or* we just have 'allow-delete' (-D, --sync-delete; a la rsync). *And*
there is a separate sanity guard: if there are local files that would
be deleted *and* there are zero local files matching anything in the mdir
(i.e. no indication that this is a correct sync dir), then we bail. Add
'--disable-delete-guard' option to disable this.

    # -D, --sync-delete
    $ mwatchdir -D -s /data/imgapi/keys -n "*.keys" /trent.mick/stor/imagesjo/keys

On start:
- get mdir listing (using filter.name): a 404 means delete all local files!
- get local readdir (using filter.name)
- delete guard (if enabled): if (a) -D, (b) have local deletes, and
  (c) *no* matching names, then bail
- add: download it and event.
- delete: if syncDelete, then delete it and event; else ignore it (no event)
- name in both: Do manta.info() to get Content-MD5. Do local md5 calc. If
  different, then need an update: re-download it and event.

Subsequent polls:
- Use the in-mem state info (i.e. we don't notice and correct local changes
  at all).
- if there is a 404 on the dir: that's like a 'delete' for every file that
  was in the list
- add: as above
- delete: as above
- update: re-download it and event
